"use strict";var mainNavLinkTimer,header=document.querySelector(".header"),logo=header.querySelector(".logo"),logoTitle=logo.querySelector(".logo__title"),search=header.querySelector(".search"),searchIcon=search.querySelector(".search__icon"),searchField=search.querySelector(".search__field"),searchSubmit=search.querySelector(".search__button"),navButton=header.querySelector(".main-nav__toggle"),mainNav=header.querySelector(".main-nav"),mainNavList=mainNav.querySelector(".main-nav__list"),siteNav=header.querySelector(".site-nav"),contacts=header.querySelector(".contacts"),citiesWrapper=contacts.querySelector(".contacts__cities-wrapper"),activeCity=citiesWrapper.querySelector(".contacts__active"),citiesList=citiesWrapper.querySelector(".contacts__cities"),citiesHeader=citiesList.querySelectorAll(".contacts__city"),main=document.querySelector(".main"),sidebar=main.querySelector(".sidebar"),sidebarCatalogLink=sidebar.querySelector(".sidebar__link--catalog"),catalog=sidebar.querySelector(".catalog"),catalogHeader=catalog.querySelector(".catalog__header"),catalogTitle=catalog.querySelector(".catalog__title"),catalogButton=catalog.querySelector(".catalog__toggle"),catalogWrapper=catalog.querySelector(".catalog__wrapper"),catalogItems=catalog.querySelectorAll(".catalog__item"),catalogLinks=catalog.querySelectorAll(".catalog__link"),catalogNumbers=catalog.querySelectorAll(".catalog__number"),catalogSublists=catalog.querySelectorAll(".catalog__sublist"),feedback=main.querySelector(".feedback"),footer=document.querySelector(".footer"),citiesFooter=footer.querySelectorAll(".footer__city"),addressesFooter=footer.querySelectorAll(".footer__address"),searchFieldWidth=100,mainNavWidth=240,getScrollWidth=function(){var e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",document.body.appendChild(e);var a=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),a},navButtonClickHandler=function(){window.matchMedia("(max-width: 1023px)").matches&&(navButton.classList.contains("main-nav__toggle--closed")?(document.body.classList.add("no-scroll"),header.classList.add("header--fixed"),logo.classList.remove("logo--opened"),logo.classList.add("logo--closed"),search.classList.remove("search--closed"),mainNav.style.width="",mainNavList.classList.remove("main-nav__list--closed"),siteNav.classList.remove("site-nav--closed"),navButton.classList.remove("main-nav__toggle--closed"),navButton.classList.add("main-nav__toggle--opened"),sidebar.classList.add("sidebar--closed")):(document.body.classList.remove("no-scroll"),header.classList.remove("header--fixed"),logo.classList.remove("logo--closed"),logo.classList.add("logo--opened"),search.classList.add("search--closed"),mainNavList.classList.add("main-nav__list--closed"),siteNav.classList.add("site-nav--closed"),navButton.classList.remove("main-nav__toggle--opened"),navButton.classList.add("main-nav__toggle--closed"),sidebar.classList.remove("sidebar--closed")))},searchFieldFocusHandler=function(){navButton.classList.contains("main-nav__toggle--opened")||mainNavList.classList.contains("main-nav__list--fixed")||siteNav.classList.contains("site-nav--closed")||(mainNav.style.transition="all 0.5s cubic-bezier(0.77, 0, 0.175, 1)",mainNav.style.width="",mainNav.classList.add("main-nav--closed"),searchField.removeEventListener("click",searchFieldFocusHandler),searchField.classList.remove("search__field--closed"),searchField.style.transition="all 0.5s cubic-bezier(0.77, 0, 0.175, 1)",searchField.style.width=searchFieldWidth+"px"),window.matchMedia("(max-width: 1023px)").matches||(searchIcon.classList.add("search__icon--opened"),searchField.placeholder="Поиск")},searchFieldBlurHandler=function(){window.matchMedia("(max-width: 1023px)").matches||(searchIcon.classList.remove("search__icon--opened"),searchField.placeholder="Поиск товаров и услуг",header.classList.contains("header--fixed")||(searchField.removeEventListener("click",searchFieldBlurHandler),searchField.classList.add("search__field--closed"),searchField.style.width="",mainNav.style.width=mainNavWidth+"px",mainNav.classList.remove("main-nav--closed")))},getSearchInputWidth=function(){0===pageYOffset?(mainNav.style.transition="",mainNav.style.width="",mainNavWidth=mainNav.getBoundingClientRect().width,mainNav.style.width=0,searchField.style.transition="",searchField.style.width="100%",searchFieldWidth=searchField.getBoundingClientRect().width,searchField.classList.add("search__field--closed"),searchField.style.width="",mainNav.style.width=mainNavWidth+"px",mainNav.classList.remove("main-nav--closed")):(mainNav.style.width="",searchField.style.width="")},mainNavLinkCatalogMouseoverHandler=function(){if(!window.matchMedia("(max-width: 1023px)").matches){window.removeEventListener("scroll",windowScrollHandler),offsetTop=pageYOffset,window.matchMedia("(max-width: 1687px)").matches?(header.style.left="",header.style.right=getScrollWidth()+"px"):(header.style.left=65<offsetTop?getScrollWidth()/-2+"px":"",header.style.right=65<offsetTop?getScrollWidth()/2+"px":getScrollWidth()+"px"),document.body.style.top=-offsetTop+"px",document.body.style.width="calc(100% - "+getScrollWidth()+"px)",document.body.classList.add("no-scroll"),mainNavOverlay.classList.remove("main-nav__overlay--out"),mainNavOverlay.classList.add("main-nav__overlay--hover");var e=mainNavLinkCatalog.getBoundingClientRect().left;sidebar.style.left=e+"px",sidebar.classList.remove("sidebar--out"),sidebar.classList.add("sidebar--hover"),mainNavLinkTimer&&(clearTimeout(mainNavLinkTimer),mainNavLinkTimer=null),catalogItems.forEach(function(e){e.addEventListener("mouseenter",catalogItemMouseenterHandler),e.addEventListener("mouseleave",catalogItemMouseleaveHandler)}),mainNavOverlay.addEventListener("mouseover",mainNavOverlayMouseoverHandler),sidebar.addEventListener("mouseover",sidebarMouseoverHandler)}},catalogItemMouseenterHandler=function(){catalogWrapper.classList.add("catalog__wrapper--hovered")},catalogItemMouseleaveHandler=function(){catalogWrapper.classList.remove("catalog__wrapper--hovered")},mainNavOverlayMouseoverHandler=function(){document.body.style.top="",document.body.style.width="",document.body.classList.remove("no-scroll"),header.style.left="",header.style.right="",window.scroll(0,offsetTop),mainNavOverlay.classList.add("main-nav__overlay--out"),sidebar.classList.add("sidebar--out"),sidebar.style.left="",mainNavLinkCatalog.removeEventListener("mouseover",mainNavOverlayMouseoverHandler),window.addEventListener("scroll",windowScrollHandler),mainNavLinkTimer=setTimeout(function(){catalogItems.forEach(function(e){e.removeEventListener("mouseenter",catalogItemMouseenterHandler),e.removeEventListener("mouseleave",catalogItemMouseleaveHandler)}),mainNavOverlay.classList.remove("main-nav__overlay--hover"),sidebar.classList.remove("sidebar--hover"),sidebar.removeEventListener("mouseover",sidebarMouseoverHandler)},500)},sidebarMouseoverHandler=function(){mainNavOverlay.classList.remove("main-nav__overlay--out"),mainNavOverlay.classList.add("main-nav__overlay--hover"),sidebar.classList.remove("sidebar--out"),sidebar.classList.add("sidebar--hover"),mainNavLinkTimer&&(clearTimeout(mainNavLinkTimer),mainNavLinkTimer=null)},mainNavLinkCatalog=mainNav.querySelector(".main-nav__link--catalog"),mainNavOverlay=mainNav.querySelector(".main-nav__overlay");mainNavLinkCatalog.addEventListener("mouseover",mainNavLinkCatalogMouseoverHandler);var targetLink,targetCatalogSublist,activeCityClickHandler=function(){activeCity.addEventListener("click",function(){citiesList.classList.toggle("contacts__cities--opened");for(var e=0;e<citiesHeader.length;e++)citiesHeader[e].addEventListener("click",citiesHeaderClickHandler,!0);document.addEventListener("click",citiesListCloseHandler,!0)})},citiesHeaderClickHandler=function(e){activeCity.textContent=e.target.textContent,citiesList.classList.remove("contacts__cities--opened"),citiesHeader.forEach(function(e){e.removeEventListener("click",citiesHeaderClickHandler,!0)})},citiesListCloseHandler=function(e){e.target.classList.contains("contacts__city")||(citiesList.classList.remove("contacts__cities--opened"),e.stopPropagation()),document.removeEventListener("click",citiesListCloseHandler,!0)},offsetTop=0,sidebarCatalogLinkClickHandler=function(e){e.preventDefault(),offsetTop=pageYOffset,document.body.style.top=-offsetTop+"px",document.body.classList.add("no-scroll"),catalog.classList.add("catalog--opened");for(var a=0;a<catalogLinks.length;a++)1<catalogLinks[a].parentElement.childElementCount&&catalogLinks[a].addEventListener("click",catalogLinkClickHandler,!0);catalogButton.addEventListener("click",catalogButtonClickHandler)},catalogLinkClickHandler=function(a){a.preventDefault(),catalogTitle.classList.add("catalog__title--opened"),catalogTitle.textContent=a.currentTarget.firstChild.textContent,catalogItems.forEach(function(e){e!==a.currentTarget.parentElement&&e.classList.add("catalog__item--closed")}),(targetLink=a.currentTarget).classList.add("catalog__link--closed"),(targetCatalogSublist=a.currentTarget.parentElement.querySelector(".catalog__sublist")).classList.add("catalog__sublist--opened"),catalogTitle.addEventListener("click",catalogTitleClickHandler)},catalogTitleClickHandler=function(){catalogTitle.classList.remove("catalog__title--opened"),catalogTitle.textContent="Каталог",catalogItems.forEach(function(e){e.classList.remove("catalog__item--closed")}),(targetLink||targetCatalogSublist)&&(targetLink.classList.remove("catalog__link--closed"),targetCatalogSublist.classList.remove("catalog__sublist--opened")),catalogTitle.removeEventListener("click",catalogTitleClickHandler)},catalogButtonClickHandler=function(){catalog.classList.remove("catalog--opened"),catalogButton.removeEventListener("click",catalogButtonClickHandler),catalogTitle.removeEventListener("click",catalogTitleClickHandler),document.body.style.top="",document.body.classList.remove("no-scroll"),window.scroll(0,offsetTop);for(var e=0;e<catalogLinks.length;e++)1<catalogLinks[e].parentElement.childElementCount&&catalogLinks[e].removeEventListener("click",catalogLinkClickHandler,!0);catalogTitle.classList.remove("catalog__title--opened"),catalogTitle.textContent="Каталог",catalogItems.forEach(function(e){e.classList.remove("catalog__item--closed")}),(targetLink||targetCatalogSublist)&&(targetLink.classList.remove("catalog__link--closed"),targetCatalogSublist.classList.remove("catalog__sublist--opened"))},setCatalogNumbersValue=function(){catalogItems.forEach(function(e,a){var t=e.querySelector(".catalog__sublist"),s=null===t?"":t.childElementCount;catalogNumbers[a].textContent=s})},bestsellersItemClickHandler=function(e){e.preventDefault(),window.location.href="#"},bestsellersItemMousedownHandler=function(e){e.preventDefault(),2===e.which&&(window.open("#","_blank"),window.focus())},bestsellersItems=main.querySelectorAll(".item--bestsellers");bestsellersItems.forEach(function(e){e.addEventListener("click",bestsellersItemClickHandler),e.addEventListener("mousedown",bestsellersItemMousedownHandler)});var citiesFooterClickHandler=function(a,t){a.addEventListener("click",function(e){e.preventDefault(),a.classList.contains("footer__city--active")||(citiesFooter.forEach(function(e){e.classList.remove("footer__city--active")}),addressesFooter.forEach(function(e){e.classList.remove("footer__address--active")}),a.classList.add("footer__city--active"),t.classList.add("footer__address--active"))})},windowScrollHandler=function(){var c=sidebar.getBoundingClientRect().height;window.matchMedia("(max-width: 1023px)").matches||(searchField.blur(),searchField.style.transition="border-bottom 0.5s cubic-bezier(0.77, 0, 0.175, 1)",115<main.getBoundingClientRect().top?(header.classList.remove("header--fixed"),main.classList.remove("main--full"),logoTitle.classList.remove("logo__title--closed"),mainNavList.classList.remove("main-nav__list--closed"),siteNav.classList.remove("site-nav--closed"),contacts.classList.remove("contacts--closed"),searchField.classList.add("search__field--closed")):(header.classList.add("header--fixed"),main.classList.add("main--full"),logoTitle.classList.add("logo__title--closed"),mainNavList.classList.add("main-nav__list--closed"),siteNav.classList.add("site-nav--closed"),contacts.classList.add("contacts--closed"),searchField.classList.remove("search__field--closed")),getSearchInputWidth(),c=0);setTimeout(function(){var e=feedback.offsetTop-innerHeight+c,a=e+feedback.getBoundingClientRect().height;if(pageYOffset>e&&pageYOffset<a)if(pageYOffset<=a){for(var t=(pageYOffset-e)/(a-e),s=[[21,38,46],[251,192,45]],i=[],l=0;l<s[0].length;l++)if(s[0][l]<s[1][l]){var o=(s[1][l]-s[0][l])*t+s[0][l];i[l]=Math.round(o)}else o=s[0][l]-(s[0][l]-s[1][l])*t,i[l]=Math.round(o);feedback.style["background-color"]="rgb("+i.join(",")+")"}else pageYOffset>=a||(feedback.style["background-color"]="rgb(251, 192, 45)");else feedback.style["background-color"]="rgb(251, 192, 45)"},100)},windowResizeHandler=function(){window.matchMedia("(max-width: 1023px)").matches?(document.body.classList.remove("dark"),document.body.style.overflow="",document.body.style.width="",header.style.zIndex="",header.style.right="",setTimeout(function(){header.style.transition=""},500),logoTitle.classList.remove("logo__title--closed"),searchField.placeholder="Поиск",navButton.classList.contains("main-nav__toggle--opened")&&logo.classList.contains("logo--opened")&&(navButton.classList.remove("main-nav__toggle--opened"),navButton.classList.add("main-nav__toggle--closed")),mainNavList.classList.contains("main-nav__list--fixed")?(mainNavList.classList.remove("main-nav__list--fixed"),mainNavList.classList.add("main-nav__list--closed"),navButton.classList.add("main-nav__toggle--closed"),siteNav.classList.add("site-nav--closed"),search.classList.add("search--closed")):navButton.classList.contains("main-nav__toggle--closed")&&(mainNavList.classList.add("main-nav__list--closed"),siteNav.classList.add("site-nav--closed"),search.classList.add("search--closed")),sidebarCatalogLink.addEventListener("click",sidebarCatalogLinkClickHandler),catalog.classList.remove("catalog--opened"),catalogHeader.classList.remove("catalog__header--opened"),catalogButton.removeEventListener("click",catalogButtonClickHandler),catalogWrapper.classList.remove("catalog__wrapper--opened"),catalogTitleClickHandler(),catalogLinks.forEach(function(e){e.classList.remove("catalog__link--opened")}),catalogSublists.forEach(function(e){e.classList.remove("catalog__sublist--opened")})):(windowScrollHandler(),document.body.classList.remove("no-scroll"),document.body.classList.remove("dark"),document.body.style.overflow="",document.body.style.width="",header.style.zIndex="",header.style.right="",setTimeout(function(){header.style.transition=""},500),header.classList.remove("header--fixed"),main.classList.remove("main--full"),pageYOffset,logo.classList.remove("logo--closed"),logo.classList.add("logo--opened"),logoTitle.classList.remove("logo__title--closed"),navButton.classList.remove("main-nav__toggle--opened"),navButton.classList.add("main-nav__toggle--closed"),mainNavList.classList.remove("main-nav__list--closed"),siteNav.classList.remove("site-nav--closed"),search.classList.add("search--closed"),searchField.placeholder="Поиск товаров и услуг",contacts.classList.remove("contacts--closed"),searchField.addEventListener("focus",searchFieldFocusHandler),searchField.addEventListener("blur",searchFieldBlurHandler),sidebar.classList.remove("sidebar--closed"),sidebarCatalogLink.removeEventListener("click",sidebarCatalogLinkClickHandler),catalog.classList.remove("catalog--opened"),catalogHeader.classList.remove("catalog__header--opened"),catalogButton.removeEventListener("click",catalogButtonClickHandler),catalogWrapper.classList.remove("catalog__wrapper--opened"),catalogTitleClickHandler(),catalogLinks.forEach(function(e){e.classList.remove("catalog__link--opened")}),catalogSublists.forEach(function(e){e.classList.remove("catalog__sublist--opened")}))};document.addEventListener("DOMContentLoaded",function(){window.addEventListener("scroll",windowScrollHandler),window.addEventListener("resize",windowResizeHandler),windowResizeHandler(),activeCityClickHandler(),navButton.addEventListener("click",navButtonClickHandler),searchSubmit.addEventListener("click",function(e){searchField.validity.valueMissing?searchField.setCustomValidity("Введите текст запроса."):(search.submit(),e.preventDefault())});for(var e=0;e<citiesFooter.length;e++)citiesFooterClickHandler(citiesFooter[e],addressesFooter[e]);setCatalogNumbersValue()}),$(document).ready(function(){$(window).on("load resize",function(){1024<=innerWidth?($(".bestsellers__products.slick-initialized").slick("slickUnfilter"),$(".bestsellers__products.slick-initialized").slick("unslick")):document.querySelector(".bestsellers__products").classList.contains("slick-initialized")||$(".bestsellers__products").slick({dots:!0,arrows:!0,infinite:!0,appendArrows:$(".controls"),prevArrow:$(".controls .controls__button--previous"),nextArrow:$(".controls .controls__button--next")})})});